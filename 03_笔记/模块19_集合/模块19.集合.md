# æ¨¡å—19.é›†åˆ

```java
æ¨¡å—18å›é¡¾:
  1.Collectioné›†åˆ:å•åˆ—é›†åˆçš„é¡¶çº§æ¥å£
    a.add  addAll  clear size  isEmpty  remove  toArray  contains
  2.è¿­ä»£å™¨:Iterator
    a.è·å–:iteratoræ–¹æ³•
    b.æ–¹æ³•:
      hasNext()
      next()
    c.å¹¶å‘ä¿®æ”¹å¼‚å¸¸:åœ¨è¿­ä»£é›†åˆçš„æ—¶å€™,ä¸èƒ½éšæ„ä¿®æ”¹é›†åˆé•¿åº¦
      åŸå› :è°ƒç”¨add,åªç»™å®é™…æ“ä½œæ¬¡æ•°+1.åé¢è°ƒç”¨nextçš„æ—¶å€™,æ²¡æœ‰ç»™é¢„æœŸæ“ä½œæ¬¡æ•°é‡æ–°èµ‹å€¼,å¯¼è‡´é¢„æœŸæ“ä½œæ¬¡æ•°å’Œå®é™…æ“ä½œæ¬¡æ•°ä¸ç›¸ç­‰äº†
          
   3.æ•°æ®ç»“æ„:
     æ ˆ:å…ˆè¿›åå‡º
     é˜Ÿåˆ—:å…ˆè¿›å…ˆå‡º
     æ•°ç»„:æŸ¥è¯¢å¿«,å¢åˆ æ…¢
     é“¾è¡¨:æŸ¥è¯¢æ…¢,å¢åˆ å¿«
         
   4.ArrayList
     a.ç‰¹ç‚¹:
       å…ƒç´ æœ‰åº,æœ‰ç´¢å¼•,å…ƒç´ å¯é‡å¤,çº¿ç¨‹ä¸å®‰å…¨
     b.æ•°æ®ç»“æ„:
       æ•°ç»„
     c.æ–¹æ³•:
       add(å…ƒç´ )ç›´æ¥åœ¨æœ€åæ·»åŠ å…ƒç´ 
       add(ç´¢å¼•,å…ƒç´ )åœ¨æŒ‡å®šç´¢å¼•ä½ç½®ä¸Šæ·»åŠ å…ƒç´ 
       remove(å…ƒç´ )åˆ é™¤æŒ‡å®šå…ƒç´ 
       remove(ç´¢å¼•)æŒ‰ç…§æŒ‡å®šç´¢å¼•åˆ é™¤å…ƒç´ 
       size()è·å–å…ƒç´ ä¸ªæ•°
       get(ç´¢å¼•)æ ¹æ®ç´¢å¼•è·å–å…ƒç´ 
       set(ç´¢å¼•,å…ƒç´ )å°†æŒ‡å®šç´¢å¼•ä½ç½®ä¸Šçš„å…ƒç´ ä¿®æ”¹æˆæˆ‘ä»¬æŒ‡å®šçš„å…ƒç´ 
     d.åˆ©ç”¨æ— å‚æ„é€ åˆ›å»ºé›†åˆå¯¹è±¡,ç¬¬ä¸€æ¬¡addæ—¶,ä¼šåˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º10çš„ç©ºæ•°ç»„
       è¶…å‡ºèŒƒå›´,è‡ªåŠ¨æ‰©å®¹->Arrays.copyOf
       æ‰©å®¹1.5å€
           
   5.LinkedList
     a.ç‰¹ç‚¹: å…ƒç´ æœ‰åº æœ‰ç´¢å¼•(javaæä¾›äº†æŒ‰ç…§ç´¢å¼•æ“ä½œå…ƒç´ çš„æ–¹æ³•,å¹¶ä¸ä»£è¡¨æœ¬è´¨ä¸Šæ‹¥æœ‰ç´¢å¼•),å…ƒç´ å¯é‡å¤,çº¿ç¨‹ä¸å®‰å…¨
         
     b.æ•°æ®ç»“æ„:åŒå‘é“¾è¡¨
     c.æ–¹æ³•:æœ‰å¤§é‡ç›´æ¥æ“ä½œæ”¶å°¾å…ƒç´ çš„æ–¹æ³•
         
   6.å¢å¼ºfor:
     a.æ ¼å¼:
       for(å…ƒç´ ç±»å‹ å˜é‡å:é›†åˆåæˆ–è€…æ•°ç»„å){
           å˜é‡å°±ä»£è¡¨æ¯ä¸€ä¸ªå…ƒç´ 
       }

     b.åŸç†:
       éå†é›†åˆæ—¶,åŸç†ä¸ºè¿­ä»£å™¨
       éå†æ•°ç»„æ—¶,åŸç†ä¸ºæ™®é€šfor
           
æ¨¡å—19é‡ç‚¹:
  1.ä¼šCollectionsé›†åˆå·¥å…·ç±»çš„å¸¸ç”¨æ–¹æ³•
  2.ä¼šä½¿ç”¨æ³›å‹
  3.çŸ¥é“HashSetå’ŒLinkedHashSetçš„ç‰¹ç‚¹ä»¥åŠä½¿ç”¨
  4.çŸ¥é“HashSetå°†å…ƒç´ å»é‡å¤çš„è¿‡ç¨‹       
```

# ç¬¬ä¸€ç« .Collectionsé›†åˆå·¥å…·ç±»

```java
1.æ¦‚è¿°:é›†åˆå·¥å…·ç±»
2.ç‰¹ç‚¹:
  a.æ„é€ ç§æœ‰
  b.æ–¹æ³•éƒ½æ˜¯é™æ€çš„
      
3.ä½¿ç”¨:ç±»åç›´æ¥è°ƒç”¨
    
4.æ–¹æ³•:
  static <T> boolean addAll(Collection<? super T> c, T... elements)->æ‰¹é‡æ·»åŠ å…ƒç´  
  static void shuffle(List<?> list) ->å°†é›†åˆä¸­çš„å…ƒç´ é¡ºåºæ‰“ä¹±
  static <T> void sort(List<T> list) ->å°†é›†åˆä¸­çš„å…ƒç´ æŒ‰ç…§é»˜è®¤è§„åˆ™æ’åº
  static <T> void sort(List<T> list, Comparator<? super T> c)->å°†é›†åˆä¸­çš„å…ƒç´ æŒ‰ç…§æŒ‡å®šè§„åˆ™æ’åº 
```

```java
public class Demo01Collections {
    public static void main(String[] args) {
        ArrayList<String> list = new ArrayList<>();
        //static <T> boolean addAll(Collection<? super T> c, T... elements)->æ‰¹é‡æ·»åŠ å…ƒç´ 
        Collections.addAll(list,"å¼ ä¸‰","æå››","ç‹äº”","èµµå…­","ç”°ä¸ƒ","æœ±å…«");
        System.out.println(list);
        //static void shuffle(List<?> list) ->å°†é›†åˆä¸­çš„å…ƒç´ é¡ºåºæ‰“ä¹±
        Collections.shuffle(list);
        System.out.println(list);
        //static <T> void sort(List<T> list) ->å°†é›†åˆä¸­çš„å…ƒç´ æŒ‰ç…§é»˜è®¤è§„åˆ™æ’åº-> ASCIIç è¡¨
        ArrayList<String> list1 = new ArrayList<>();
        list1.add("c.ä¸¾å¤´æœ›æ˜æœˆ");
        list1.add("a.åºŠå‰æ˜æœˆå…‰");
        list1.add("d.ä½å¤´æ€æ•…ä¹¡");
        list1.add("b.ç–‘æ˜¯åœ°ä¸Šéœœ");
        Collections.sort(list1);
        System.out.println(list1);
    }
}

```

```java
1.æ–¹æ³•:static <T> void sort(List<T> list, Comparator<? super T> c)->å°†é›†åˆä¸­çš„å…ƒç´ æŒ‰ç…§æŒ‡å®šè§„åˆ™æ’åº
    
2.Comparatoræ¯”è¾ƒå™¨
  a.æ–¹æ³•:
    int compare(T o1,T o2)
                o1-o2 -> å‡åº
                o2-o1 -> é™åº    
```

```java
public class Person {
    private String name;
    private Integer age;

    public Person() {
    }

    public Person(String name, Integer age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Integer getAge() {
        return age;
    }

    public void setAge(Integer age) {
        this.age = age;
    }

    @Override
    public String toString() {
        return "Person{" +
                "name='" + name + '\'' +
                ", age=" + age +
                '}';
    }
}

```

```java
public class Demo02Collections {
    public static void main(String[] args) {
        ArrayList<Person> list = new ArrayList<>();
        list.add(new Person("æŸ³å²©",18));
        list.add(new Person("æ¶›å“¥",16));
        list.add(new Person("é‡‘è²",20));

        Collections.sort(list, new Comparator<Person>() {
            @Override
            public int compare(Person o1, Person o2) {
                return o1.getAge()-o2.getAge();
            }
        });

        System.out.println(list);
    }
}

```

```java
1.æ¥å£:Comparableæ¥å£
2.æ–¹æ³•: int compareTo(T o) -> this-o (å‡åº)   o-this(é™åº)
```

```java
public class Student implements Comparable<Student>{
    private String name;
    private Integer score;

    public Student() {
    }

    public Student(String name, Integer score) {
        this.name = name;
        this.score = score;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Integer getScore() {
        return score;
    }

    public void setScore(Integer score) {
        this.score = score;
    }

    @Override
    public String toString() {
        return "Student{" +
                "name='" + name + '\'' +
                ", score=" + score +
                '}';
    }

    @Override
    public int compareTo(Student o) {
        return this.getScore()-o.getScore();
    }
}

```

```java
public class Demo03Collections {
    public static void main(String[] args) {
        ArrayList<Student> list = new ArrayList<>();
        list.add(new Student("æ¶›å“¥",100));
        list.add(new Student("æŸ³å²©",150));
        list.add(new Student("ä¸‰ä¸Š",80));
        Collections.sort(list);
        System.out.println(list);
    }
}

```

> ```java
> Arraysä¸­çš„é™æ€æ–¹æ³•:
>   static <T> List<T> asList(T...a) -> ç›´æ¥æŒ‡å®šå…ƒç´ ,è½¬å­˜åˆ°listé›†åˆä¸­
> ```
>
> ```java
> public class Demo04Collections {
>     public static void main(String[] args) {
>         List<String> list = Arrays.asList("å¼ ä¸‰", "æå››", "ç‹äº”");
>         System.out.println(list);
>     }
> }
> ```

# ç¬¬äºŒç« .æ³›å‹

```java
1.æ³›å‹:<>
2.ä½œç”¨:
  ç»Ÿä¸€æ•°æ®ç±»å‹,é˜²æ­¢å°†æ¥çš„æ•°æ®è½¬æ¢å¼‚å¸¸
3.æ³¨æ„:
  a.æ³›å‹ä¸­çš„ç±»å‹å¿…é¡»æ˜¯å¼•ç”¨ç±»å‹
  b.å¦‚æœæ³›å‹ä¸å†™,é»˜è®¤ç±»å‹ä¸ºObject    
```

## 1.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹

```java
1.ä»ä½¿ç”¨å±‚é¢ä¸Šæ¥è¯´:
  ç»Ÿä¸€æ•°æ®ç±»å‹,é˜²æ­¢å°†æ¥çš„æ•°æ®ç±»å‹è½¬æ¢å¼‚å¸¸
2.ä»å®šä¹‰å±‚é¢ä¸Šæ¥çœ‹:
  å®šä¹‰å¸¦æ³›å‹çš„ç±»,æ–¹æ³•ç­‰,å°†æ¥ä½¿ç”¨çš„æ—¶å€™ç»™æ³›å‹ç¡®å®šä»€ä¹ˆç±»å‹,æ³›å‹å°±ä¼šå˜æˆä»€ä¹ˆç±»å‹,å‡¡æ˜¯æ¶‰åŠåˆ°æ³›å‹çš„éƒ½ä¼šå˜æˆç¡®å®šçš„ç±»å‹,ä»£ç æ›´çµæ´»
```

```java
public class Demo01Genericity {
    public static void main(String[] args) {
        ArrayList list = new ArrayList();
        list.add("1");
        list.add(1);
        list.add("abc");
        list.add(2.5);
        list.add(true);

        //è·å–å…ƒç´ ä¸­ä¸ºStringç±»å‹çš„å­—ç¬¦ä¸²é•¿åº¦
        for (Object o : list) {
            String s = (String) o;
            System.out.println(s.length());//ClassCastException
           
        }
    }
}
```

<img src="img/1706504536249.png" alt="1706504536249" style="zoom:80%;" />

## 2.æ³›å‹çš„å®šä¹‰

### 2.1å«æœ‰æ³›å‹çš„ç±»

```java
1.å®šä¹‰:
   public class ç±»å<E>{
       
   }

2.ä»€ä¹ˆæ—¶å€™ç¡®å®šç±»å‹
  newå¯¹è±¡çš„æ—¶å€™ç¡®å®šç±»å‹  
```

```java
public class MyArrayList <E>{
    //å®šä¹‰ä¸€ä¸ªæ•°ç»„,å……å½“ArrayListåº•å±‚çš„æ•°ç»„,é•¿åº¦ç›´æ¥è§„å®šä¸º10
    Object[] obj = new Object[10];
    //å®šä¹‰size,ä»£è¡¨é›†åˆå…ƒç´ ä¸ªæ•°
    int size;

    /**
     * å®šä¹‰ä¸€ä¸ªaddæ–¹æ³•,å‚æ•°ç±»å‹éœ€è¦å’Œæ³›å‹ç±»å‹ä¿æŒä¸€è‡´
     *
     * æ•°æ®ç±»å‹ä¸ºE  å˜é‡åéšä¾¿å–
     */
    public boolean add(E e){
        obj[size] = e;
        size++;
        return true;
    }

    /**
     * å®šä¹‰ä¸€ä¸ªgetæ–¹æ³•,æ ¹æ®ç´¢å¼•è·å–å…ƒç´ 
     */
    public E get(int index){
        return (E) obj[index];
    }

    @Override
    public String toString() {
        return Arrays.toString(obj);
    }
}
```

```java
public class Demo02Genericity {
    public static void main(String[] args) {
        MyArrayList<String> list1 = new MyArrayList<>();
        list1.add("aaa");
        list1.add("bbb");
        System.out.println(list1);//ç›´æ¥è¾“å‡ºå¯¹è±¡å,é»˜è®¤è°ƒç”¨toString

        System.out.println("===========");

        MyArrayList<Integer> list2 = new MyArrayList<>();
        list2.add(1);
        list2.add(2);
        Integer element = list2.get(0);
        System.out.println(element);
        System.out.println(list2);
    }
}

```

### 2.2å«æœ‰æ³›å‹çš„æ–¹æ³•

```java
1.æ ¼å¼:
  ä¿®é¥°ç¬¦ <E> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(E e)
      
2.ä»€ä¹ˆæ—¶å€™ç¡®å®šç±»å‹
  è°ƒç”¨çš„æ—¶å€™ç¡®å®šç±»å‹
```

```java
public class ListUtils {
    //å®šä¹‰ä¸€ä¸ªé™æ€æ–¹æ³•addAll,æ·»åŠ å¤šä¸ªé›†åˆçš„å…ƒç´ 
    public static <E> void addAll(ArrayList<E> list,E...e){
        for (E element : e) {
            list.add(element);
        }
    }

}
```

```java
public class Demo03Genericity {
    public static void main(String[] args) {
        ArrayList<String> list1 = new ArrayList<>();
        ListUtils.addAll(list1,"a","b","c");
        System.out.println(list1);

        System.out.println("================");

        ArrayList<Integer> list2 = new ArrayList<>();
        ListUtils.addAll(list2,1,2,3,4,5);
        System.out.println(list2);
    }
}

```

### 2.3å«æœ‰æ³›å‹çš„æ¥å£

```java
1.æ ¼å¼:
  public interface æ¥å£å<E>{
      
  }
2.ä»€ä¹ˆæ—¶å€™ç¡®å®šç±»å‹:
  a.åœ¨å®ç°ç±»çš„æ—¶å€™è¿˜æ²¡æœ‰ç¡®å®šç±»å‹,åªèƒ½åœ¨newå®ç°ç±»çš„æ—¶å€™ç¡®å®šç±»å‹äº† ->æ¯”å¦‚ ArrayList
  b.åœ¨å®ç°ç±»çš„æ—¶å€™ç›´æ¥ç¡®å®šç±»å‹äº† -> æ¯”å¦‚Scanner    
```

```java
public interface MyList <E>{
    public boolean add(E e);
}
```

```java
public class MyArrayList1<E> implements MyList<E>{
    //å®šä¹‰ä¸€ä¸ªæ•°ç»„,å……å½“ArrayListåº•å±‚çš„æ•°ç»„,é•¿åº¦ç›´æ¥è§„å®šä¸º10
    Object[] obj = new Object[10];
    //å®šä¹‰size,ä»£è¡¨é›†åˆå…ƒç´ ä¸ªæ•°
    int size;

    /**
     * å®šä¹‰ä¸€ä¸ªaddæ–¹æ³•,å‚æ•°ç±»å‹éœ€è¦å’Œæ³›å‹ç±»å‹ä¿æŒä¸€è‡´
     *
     * æ•°æ®ç±»å‹ä¸ºE  å˜é‡åéšä¾¿å–
     */
    public boolean add(E e){
        obj[size] = e;
        size++;
        return true;
    }

    /**
     * å®šä¹‰ä¸€ä¸ªgetæ–¹æ³•,æ ¹æ®ç´¢å¼•è·å–å…ƒç´ 
     */
    public E get(int index){
        return (E) obj[index];
    }

    @Override
    public String toString() {
        return Arrays.toString(obj);
    }
}

```

```java
public class Demo04Genericity {
    public static void main(String[] args) {
        MyArrayList1<String> list1 = new MyArrayList1<>();
        list1.add("å¼ ä¸‰");
        list1.add("æå››");
        System.out.println(list1.get(0));

    }
}
```

```java
public interface MyIterator <E>{
    E next();
}

public class MyScanner implements MyIterator<String>{
    @Override
    public String next() {
        return "æ¶›å“¥å’Œé‡‘è²çš„æ•…äº‹";
    }
}

```

```java
public class Demo05Genericity {
    public static void main(String[] args) {
        MyScanner myScanner = new MyScanner();
        String result = myScanner.next();
        System.out.println("result = " + result);
    }
}

```

## 3.æ³›å‹çš„é«˜çº§ä½¿ç”¨

### 3.1 æ³›å‹é€šé…ç¬¦ ?

```java
public class Demo01Genericity {
    public static void main(String[] args) {
        ArrayList<String> list1 = new ArrayList<>();
        list1.add("å¼ ä¸‰");
        list1.add("æå››");

        ArrayList<Integer> list2 = new ArrayList<>();
        list2.add(1);
        list2.add(2);
        
        method(list1);
        method(list2);
    }
    
    public static void method(ArrayList<?> list){
        for (Object o : list) {
            System.out.println(o);
        }
    }

}
```

### 3.2 æ³›å‹çš„ä¸Šé™ä¸‹é™

```java
1.ä½œç”¨:å¯ä»¥è§„å®šæ³›å‹çš„èŒƒå›´
2.ä¸Šé™:
  a.æ ¼å¼:<? extends ç±»å‹>
  b.å«ä¹‰:?åªèƒ½æ¥æ”¶extendsåé¢çš„æœ¬ç±»ç±»å‹ä»¥åŠå­ç±»ç±»å‹    
3.ä¸‹é™:
  a.æ ¼å¼:<? super ç±»å‹>
  b.å«ä¹‰:?åªèƒ½æ¥æ”¶superåé¢çš„æœ¬ç±»ç±»å‹ä»¥åŠçˆ¶ç±»ç±»å‹    
```

```java
/**
 * Integer -> Number -> Object
 * String -> Object
 */
public class Demo02Genericity {
    public static void main(String[] args) {
        ArrayList<Integer> list1 = new ArrayList<>();
        ArrayList<String> list2 = new ArrayList<>();
        ArrayList<Number> list3 = new ArrayList<>();
        ArrayList<Object> list4 = new ArrayList<>();

        get1(list1);
        //get1(list2);é”™è¯¯
        get1(list3);
        //get1(list4);é”™è¯¯

        System.out.println("=================");

        //get2(list1);é”™è¯¯
        //get2(list2);é”™è¯¯
        get2(list3);
        get2(list4);
    }

    //ä¸Šé™  ?åªèƒ½æ¥æ”¶extendsåé¢çš„æœ¬ç±»ç±»å‹ä»¥åŠå­ç±»ç±»å‹
    public static void get1(Collection<? extends Number> collection){

    }

    //ä¸‹é™  ?åªèƒ½æ¥æ”¶superåé¢çš„æœ¬ç±»ç±»å‹ä»¥åŠçˆ¶ç±»ç±»å‹
    public static void get2(Collection<? super Number> collection){

    }
}

```

> åº”ç”¨åœºæ™¯:
>
>  1.å¦‚æœæˆ‘ä»¬åœ¨å®šä¹‰ç±»,æ–¹æ³•,æ¥å£çš„æ—¶å€™,å¦‚æœç±»å‹ä¸ç¡®å®š,æˆ‘ä»¬å¯ä»¥è€ƒè™‘å®šä¹‰å«æœ‰æ³›å‹çš„ç±»,æ–¹æ³•,æ¥å£
>
>  2.å¦‚æœç±»å‹ä¸ç¡®å®š,ä½†æ˜¯èƒ½çŸ¥é“ä»¥ååªèƒ½ä¼ é€’æŸä¸ªç±»çš„ç»§æ‰¿ä½“ç³»ä¸­çš„å­ç±»æˆ–è€…çˆ¶ç±»,å°±å¯ä»¥ä½¿ç”¨æ³›å‹çš„é€šé…ç¬¦

# ç¬¬ä¸‰ç« .æ–—åœ°ä¸»æ¡ˆä¾‹(æ‰©å±•æ¡ˆä¾‹)

## 3.1 æ¡ˆä¾‹ä»‹ç»

æŒ‰ç…§æ–—åœ°ä¸»çš„è§„åˆ™ï¼Œå®Œæˆæ´—ç‰Œå‘ç‰Œçš„åŠ¨ä½œã€‚
å…·ä½“è§„åˆ™ï¼š

ä½¿ç”¨54å¼ ç‰Œæ‰“ä¹±é¡ºåº,ä¸‰ä¸ªç©å®¶å‚ä¸æ¸¸æˆï¼Œä¸‰äººäº¤æ›¿æ‘¸ç‰Œï¼Œæ¯äºº17å¼ ç‰Œï¼Œæœ€åä¸‰å¼ ç•™ä½œåº•ç‰Œã€‚

## 3.2 æ¡ˆä¾‹åˆ†æ

- å‡†å¤‡ç‰Œï¼š

  ç‰Œå¯ä»¥è®¾è®¡ä¸ºä¸€ä¸ªArrayList<String>,æ¯ä¸ªå­—ç¬¦ä¸²ä¸ºä¸€å¼ ç‰Œã€‚
  æ¯å¼ ç‰Œç”±èŠ±è‰²æ•°å­—ä¸¤éƒ¨åˆ†ç»„æˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨èŠ±è‰²é›†åˆä¸æ•°å­—é›†åˆåµŒå¥—è¿­ä»£å®Œæˆæ¯å¼ ç‰Œçš„ç»„è£…ã€‚
  ç‰Œç”±Collectionsç±»çš„shuffleæ–¹æ³•è¿›è¡Œéšæœºæ’åºã€‚

- å‘ç‰Œ

  å°†æ¯ä¸ªäººä»¥åŠåº•ç‰Œè®¾è®¡ä¸ºArrayList<String>,å°†æœ€å3å¼ ç‰Œç›´æ¥å­˜æ”¾äºåº•ç‰Œï¼Œå‰©ä½™ç‰Œé€šè¿‡å¯¹3å–æ¨¡ä¾æ¬¡å‘ç‰Œã€‚

- çœ‹ç‰Œ

  ç›´æ¥æ‰“å°æ¯ä¸ªé›†åˆã€‚

  <img src="img/1706514131008.png" alt="1706514131008" style="zoom:80%;" />

## 3.3 ä»£ç å®ç°

```java
1.åˆ›å»ºArrayListé›†åˆ-> color -> ä¸“é—¨å­˜èŠ±è‰²
2.åˆ›å»ºä¸€ä¸ªArrayListé›†åˆ -> number -> ä¸“é—¨å­˜ç‰Œå·
3.åˆ›å»ºä¸€ä¸ªArrayListé›†åˆ -> poker -> ä¸“é—¨å­˜èŠ±è‰²å’Œç‰Œå·ç»„åˆå¥½çš„ç‰Œé¢
4.æ‰“ä¹±poker
5.åˆ›å»º4ä¸ªArrayListé›†åˆ,åˆ†åˆ«ä»£è¡¨ä¸‰ä¸ªç©å®¶,ä»¥åŠå­˜å‚¨ä¸€ä¸ªåº•ç‰Œ
6.å¦‚æœindexä¸ºæœ€åä¸‰å¼ ,å¾€dipaié›†åˆä¸­å­˜
7.å¦‚æœindex%3==0 ç»™p1
8.å¦‚æœindex%3==1 ç»™p2
9.å¦‚æœindex%3==2 ç»™p3
10.éå†çœ‹ç‰Œ
```

```java
public class Poker {
    public static void main(String[] args) {
        //1.åˆ›å»ºArrayListé›†åˆ-> color -> ä¸“é—¨å­˜èŠ±è‰²
        ArrayList<String> color = new ArrayList<>();
        //2.åˆ›å»ºä¸€ä¸ªArrayListé›†åˆ -> number -> ä¸“é—¨å­˜ç‰Œå·
        ArrayList<String> number = new ArrayList<>();
        //3.åˆ›å»ºä¸€ä¸ªArrayListé›†åˆ -> poker -> ä¸“é—¨å­˜èŠ±è‰²å’Œç‰Œå·ç»„åˆå¥½çš„ç‰Œé¢
        ArrayList<String> poker = new ArrayList<>();

        color.add("â™ ");
        color.add("â™¥");
        color.add("â™£");
        color.add("â™¦");

        for (int i = 2; i <= 10; i++) {
            number.add(i + "");
        }

        number.add("J");
        number.add("Q");
        number.add("K");
        number.add("A");

        //System.out.println(color);
        //System.out.println(number);

        for (String num : number) {
            for (String huaSe : color) {
                String pokerNumber = huaSe + num;
                poker.add(pokerNumber);
            }
        }

        poker.add("ğŸ˜Š");
        poker.add("â˜º");
        //System.out.println(poker);

        //4.æ‰“ä¹±poker
        Collections.shuffle(poker);
        //System.out.println(poker);
        //5.åˆ›å»º4ä¸ªArrayListé›†åˆ,åˆ†åˆ«ä»£è¡¨ä¸‰ä¸ªç©å®¶,ä»¥åŠå­˜å‚¨ä¸€ä¸ªåº•ç‰Œ
        ArrayList<String> p1 = new ArrayList<>();
        ArrayList<String> p2 = new ArrayList<>();
        ArrayList<String> p3 = new ArrayList<>();
        ArrayList<String> dipai = new ArrayList<>();
        for (int i = 0; i < poker.size(); i++) {
            String s = poker.get(i);
            //6.å¦‚æœindexä¸ºæœ€åä¸‰å¼ ,å¾€dipaié›†åˆä¸­å­˜
            if (i >= 51) {
                dipai.add(s);
                //7.å¦‚æœindex%3==0 ç»™p1
            } else if (i % 3 == 0) {
                p1.add(s);
                //8.å¦‚æœindex%3==1 ç»™p2
            } else if (i % 3 == 1) {
                p2.add(s);
                //9.å¦‚æœindex%3==2 ç»™p3
            }else if (i%3==2){
                p3.add(s);
            }
        }

        //10.éå†çœ‹ç‰Œ
        System.out.println("æ¶›å“¥:"+p1);
        System.out.println("ä¸‰ä¸Š:"+p2);
        System.out.println("é‡‘è²:"+p3);
        System.out.println("åº•ç‰Œ:"+dipai);
    }
}
```

```java
public class Poker1 {
    public static void main(String[] args) {
        //1.åˆ›å»ºæ•°ç»„-> color -> ä¸“é—¨å­˜èŠ±è‰²
        String[] color = "â™ -â™¥-â™£-â™¦".split("-");
        //2.åˆ›å»ºæ•°ç»„ -> number -> ä¸“é—¨å­˜ç‰Œå·
        String[] number = "2-3-4-5-6-7-8-9-10-J-Q-K-A".split("-");
        //3.åˆ›å»ºä¸€ä¸ªArrayListé›†åˆ -> poker -> ä¸“é—¨å­˜èŠ±è‰²å’Œç‰Œå·ç»„åˆå¥½çš„ç‰Œé¢
        ArrayList<String> poker = new ArrayList<>();

        //System.out.println(color);
        //System.out.println(number);

        for (String num : number) {
            for (String huaSe : color) {
                String pokerNumber = huaSe + num;
                poker.add(pokerNumber);
            }
        }

        poker.add("ğŸ˜Š");
        poker.add("â˜º");
        //System.out.println(poker);

        //4.æ‰“ä¹±poker
        Collections.shuffle(poker);
        //System.out.println(poker);
        //5.åˆ›å»º4ä¸ªArrayListé›†åˆ,åˆ†åˆ«ä»£è¡¨ä¸‰ä¸ªç©å®¶,ä»¥åŠå­˜å‚¨ä¸€ä¸ªåº•ç‰Œ
        ArrayList<String> p1 = new ArrayList<>();
        ArrayList<String> p2 = new ArrayList<>();
        ArrayList<String> p3 = new ArrayList<>();
        ArrayList<String> dipai = new ArrayList<>();
        for (int i = 0; i < poker.size(); i++) {
            String s = poker.get(i);
            //6.å¦‚æœindexä¸ºæœ€åä¸‰å¼ ,å¾€dipaié›†åˆä¸­å­˜
            if (i >= 51) {
                dipai.add(s);
                //7.å¦‚æœindex%3==0 ç»™p1
            } else if (i % 3 == 0) {
                p1.add(s);
                //8.å¦‚æœindex%3==1 ç»™p2
            } else if (i % 3 == 1) {
                p2.add(s);
                //9.å¦‚æœindex%3==2 ç»™p3
            }else if (i%3==2){
                p3.add(s);
            }
        }

        //10.éå†çœ‹ç‰Œ
        System.out.println("æ¶›å“¥:"+p1);
        System.out.println("ä¸‰ä¸Š:"+p2);
        System.out.println("é‡‘è²:"+p3);
        System.out.println("åº•ç‰Œ:"+dipai);
    }
}

```

# ç¬¬å››ç« .çº¢é»‘æ ‘(äº†è§£)

```java
é›†åˆåŠ å…¥çº¢é»‘æ ‘çš„ç›®çš„:æé«˜æŸ¥è¯¢æ•ˆç‡
HashSeté›†åˆ:
  æ•°æ®ç»“æ„:å“ˆå¸Œè¡¨
      jdk8ä¹‹å‰:å“ˆå¸Œè¡¨ = æ•°ç»„+é“¾è¡¨
      jdk8ä¹‹å:å“ˆå¸Œè¡¨ = æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ ->ä¸ºçš„æ˜¯æŸ¥è¯¢æ•ˆç‡    
```

![](img/1706192470943.png)

```java
1. æ¯ä¸€ä¸ªèŠ‚ç‚¹æˆ–æ˜¯çº¢è‰²çš„,æˆ–è€…æ˜¯é»‘è‰²çš„

2. æ ¹èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²

3. å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹æˆ–è€…çˆ¶èŠ‚ç‚¹,åˆ™è¯¥èŠ‚ç‚¹ç›¸åº”çš„æŒ‡é’ˆå±æ€§å€¼ä¸ºNil,è¿™äº›Nilè§†ä¸ºå¶èŠ‚ç‚¹,æ¯ä¸ªå¶èŠ‚ç‚¹(Nil)æ˜¯é»‘è‰²çš„

4. å¦‚æœæŸä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²,é‚£ä¹ˆå®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²(ä¸èƒ½å‡ºç°ä¸¤ä¸ªçº¢è‰²èŠ‚ç‚¹ç›¸è¿ çš„æƒ…å†µ)

5. å¯¹æ¯ä¸€ä¸ªèŠ‚ç‚¹,ä»è¯¥èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰åä»£å¶èŠ‚ç‚¹çš„ç®€å•è·¯å¾„ä¸Š,å‡åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹
```

<img src="img/1706189862423.png" alt="1706189862423" style="zoom:80%;" />

https://www.cs.usfca.edu/~galles/visualization/RedBlack

# ç¬¬äº”ç« .Seté›†åˆ

```java
1.æ¶›å“¥æ€»è¯´:Setæ¥å£å¹¶æ²¡æœ‰å¯¹Collectionæ¥å£è¿›è¡ŒåŠŸèƒ½ä¸Šçš„æ‰©å……,è€Œä¸”æ‰€æœ‰çš„Seté›†åˆåº•å±‚éƒ½æ˜¯ä¾é Mapå®ç°
```

<img src="img/1706520686621.png" alt="1706520686621" style="zoom:80%;" />

## 1.Seté›†åˆä»‹ç»

```java
Setå’ŒMapå¯†åˆ‡ç›¸å…³çš„
Mapçš„éå†éœ€è¦å…ˆå˜æˆå•åˆ—é›†åˆ,åªèƒ½å˜æˆseté›†åˆ
```

## 2.HashSeté›†åˆçš„ä»‹ç»å’Œä½¿ç”¨

```java
1.æ¦‚è¿°:HashSetæ˜¯Setæ¥å£çš„å®ç°ç±»
2.ç‰¹ç‚¹:
  a.å…ƒç´ å”¯ä¸€
  b.å…ƒç´ æ— åº
  c.æ— ç´¢å¼•
  d.çº¿ç¨‹ä¸å®‰å…¨
3.æ•°æ®ç»“æ„:å“ˆå¸Œè¡¨
  a.jdk8ä¹‹å‰:å“ˆå¸Œè¡¨ = æ•°ç»„+é“¾è¡¨
  b.jdk8ä¹‹å:å“ˆå¸Œè¡¨ = æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘
            åŠ å…¥çº¢é»‘æ ‘ç›®çš„:æŸ¥è¯¢å¿«
4.æ–¹æ³•:å’ŒCollectionä¸€æ ·
5.éå†:
  a.å¢å¼ºfor
  b.è¿­ä»£å™¨
```

```java
public class Demo01HashSet {
    public static void main(String[] args) {
        HashSet<String> set = new HashSet<>();
        set.add("å¼ ä¸‰");
        set.add("æå››");
        set.add("ç‹äº”");
        set.add("èµµå…­");
        set.add("ç”°ä¸ƒ");
        set.add("å¼ ä¸‰");
        System.out.println(set);

        //è¿­ä»£å™¨
        Iterator<String> iterator = set.iterator();
        while(iterator.hasNext()){
            System.out.println(iterator.next());
        }

        System.out.println("============");

        //å¢å¼ºfor
        for (String s : set) {
            System.out.println(s);
        }
    }
}

```

## 3.LinkedHashSetçš„ä»‹ç»ä»¥åŠä½¿ç”¨

```java
1.æ¦‚è¿°:LinkedHashSet extends HashSet
2.ç‰¹ç‚¹:
  a.å…ƒç´ å”¯ä¸€
  b.å…ƒç´ æœ‰åº
  c.æ— ç´¢å¼•
  d.çº¿ç¨‹ä¸å®‰å…¨
3.æ•°æ®ç»“æ„:
  å“ˆå¸Œè¡¨+åŒå‘é“¾è¡¨
4.ä½¿ç”¨:å’ŒHashSetä¸€æ ·      
```

```java
public class Demo02LinkedHashSet {
    public static void main(String[] args) {
        LinkedHashSet<String> set = new LinkedHashSet<>();
        set.add("å¼ ä¸‰");
        set.add("æå››");
        set.add("ç‹äº”");
        set.add("èµµå…­");
        set.add("ç”°ä¸ƒ");
        set.add("å¼ ä¸‰");
        System.out.println(set);

        //è¿­ä»£å™¨
        Iterator<String> iterator = set.iterator();
        while(iterator.hasNext()){
            System.out.println(iterator.next());
        }

        System.out.println("============");

        //å¢å¼ºfor
        for (String s : set) {
            System.out.println(s);
        }
    }
}

```

## 4.å“ˆå¸Œå€¼

```java
1.æ¦‚è¿°:æ˜¯ç”±è®¡ç®—æœºç®—å‡ºæ¥çš„ä¸€ä¸ªåè¿›åˆ¶æ•°,å¯ä»¥çœ‹åšæ˜¯å¯¹è±¡çš„åœ°å€å€¼
2.è·å–å¯¹è±¡çš„å“ˆå¸Œå€¼,ä½¿ç”¨çš„æ˜¯Objectä¸­çš„æ–¹æ³•
  public native int hashCode()
    
3.æ³¨æ„:å¦‚æœé‡å†™äº†hashCodeæ–¹æ³•,é‚£è®¡ç®—çš„å°±æ˜¯å¯¹è±¡å†…å®¹çš„å“ˆå¸Œå€¼äº†
    
4.æ€»ç»“:
  a.å“ˆå¸Œå€¼ä¸ä¸€æ ·,å†…å®¹è‚¯å®šä¸ä¸€æ ·
  b.å“ˆå¸Œå€¼ä¸€æ ·,å†…å®¹ä¹Ÿæœ‰å¯èƒ½ä¸ä¸€æ ·    
```

```java
public class Person {
    private String name;
    private Integer age;

    public Person() {
    }

    public Person(String name, Integer age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Integer getAge() {
        return age;
    }

    public void setAge(Integer age) {
        this.age = age;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;
        Person person = (Person) o;
        return Objects.equals(name, person.name) && Objects.equals(age, person.age);
    }

    @Override
    public int hashCode() {
        return Objects.hash(name, age);
    }
}

```

```java
public class Demo01Hash {
    public static void main(String[] args) {
        Person p1 = new Person("æ¶›å“¥", 18);
        Person p2 = new Person("æ¶›å“¥", 18);
        System.out.println(p1);//com.atguigu.f_hash.Person@4eec7777
        System.out.println(p2);//com.atguigu.f_hash.Person@3b07d329

        System.out.println(p1.hashCode());
        System.out.println(p2.hashCode());

        //System.out.println(Integer.toHexString(1324119927));//4eec7777
        //System.out.println(Integer.toHexString(990368553));//3b07d329

        System.out.println("======================");

        String s1 = "abc";
        String s2 = new String("abc");
        System.out.println(s1.hashCode());//96354
        System.out.println(s2.hashCode());//96354

        System.out.println("=========================");

        String s3 = "é€šè¯";
        String s4 = "é‡åœ°";
        System.out.println(s3.hashCode());//1179395
        System.out.println(s4.hashCode());//1179395

    }
}

```

> ```java
> å¦‚æœä¸é‡å†™hashCodeæ–¹æ³•,é»˜è®¤è®¡ç®—å¯¹è±¡çš„å“ˆå¸Œå€¼
> å¦‚æœé‡å†™äº†hashCodeæ–¹æ³•,è®¡ç®—çš„æ˜¯å¯¹è±¡å†…å®¹çš„å“ˆå¸Œå€¼
> ```

## 5.å­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼æ—¶å¦‚ä½•ç®—å‡ºæ¥çš„

```java
String s = "abc"
byte[] value = {97,98,99}    
```

```java
public int hashCode() {
    int h = hash;
    if (h == 0 && !hashIsZero) {
        h = isLatin1() ? StringLatin1.hashCode(value)
                       : StringUTF16.hashCode(value);
        if (h == 0) {
            hashIsZero = true;
        } else {
            hash = h;
        }
    }
    return h;
}
====================================================
StringLatin1.hashCode(value)åº•å±‚æºç ,Stringä¸­çš„å“ˆå¸Œç®—æ³•
    
public static int hashCode(byte[] value) {
    int h = 0;
    for (byte v : value) {
        h = 31 * h + (v & 0xff);
    }
    return h;
}
```

```java
ç›´æ¥è·‘åˆ°StringLatin1.hashCode(value)åº•å±‚æºç ,è®¡ç®—abcçš„å“ˆå¸Œå€¼-> 0xffè¿™ä¸ªåå…­è¿›åˆ¶å¯¹åº”çš„åè¿›åˆ¶255
ä»»ä½•æ•°æ®å’Œ255åš&è¿ç®—,éƒ½æ˜¯åŸå€¼
    
ç¬¬ä¸€åœˆ:
  h = 31*0+97 = 97
ç¬¬äºŒåœˆ:
  h = 31*97+98 = 3105
ç¬¬ä¸‰åœˆ:
  h = 31*3105+99 = 96354
```

```java
é—®é¢˜:åœ¨è®¡ç®—å“ˆå¸Œå€¼çš„æ—¶å€™,æœ‰ä¸€ä¸ªå®šå€¼å°±æ˜¯31,ä¸ºå•¥?
     31æ˜¯ä¸€ä¸ªè´¨æ•°,31è¿™ä¸ªæ•°é€šè¿‡å¤§é‡çš„è®¡ç®—,ç»Ÿè®¡,è®¤ä¸ºç”¨31,å¯ä»¥å°½é‡é™ä½å†…å®¹ä¸ä¸€æ ·ä½†æ˜¯å“ˆå¸Œå€¼ä¸€æ ·çš„æƒ…å†µ
    
     å†…å®¹ä¸ä¸€æ ·,å“ˆå¸Œå€¼ä¸€æ ·(å“ˆå¸Œå†²çª,å“ˆå¸Œç¢°æ’)
```

## 6.HashSetçš„å­˜å‚¨å»é‡å¤çš„è¿‡ç¨‹

```java
1.å…ˆè®¡ç®—å…ƒç´ çš„å“ˆå¸Œå€¼(é‡å†™hashCodeæ–¹æ³•),å†æ¯”è¾ƒå†…å®¹(é‡å†™equalsæ–¹æ³•)
2.å…ˆæ¯”è¾ƒå“ˆå¸Œå€¼,å¦‚æœå“ˆå¸Œå€¼ä¸ä¸€æ ·,å­˜
3.å¦‚æœå“ˆå¸Œå€¼ä¸€æ ·,å†æ¯”è¾ƒå†…å®¹
  a.å¦‚æœå“ˆå¸Œå€¼ä¸€æ ·,å†…å®¹ä¸ä¸€æ ·,å­˜
  b.å¦‚æœå“ˆå¸Œå€¼ä¸€æ ·,å†…å®¹ä¹Ÿä¸€æ ·,å»é‡å¤  
```

```java
public class Test02 {
    public static void main(String[] args) {
        HashSet<String> set = new HashSet<>();
        set.add("abc");
        set.add("é€šè¯");
        set.add("é‡åœ°");
        set.add("abc");
        System.out.println(set);//[é€šè¯, é‡åœ°, abc]

    }
}

```

## 7.HashSetå­˜å‚¨è‡ªå®šä¹‰ç±»å‹å¦‚ä½•å»é‡å¤

```java
public class Person {
    private String name;
    private Integer age;

    public Person() {
    }

    public Person(String name, Integer age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Integer getAge() {
        return age;
    }

    public void setAge(Integer age) {
        this.age = age;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;
        Person person = (Person) o;
        return Objects.equals(name, person.name) && Objects.equals(age, person.age);
    }

    @Override
    public int hashCode() {
        return Objects.hash(name, age);
    }

    @Override
    public String toString() {
        return "Person{" +
                "name='" + name + '\'' +
                ", age=" + age +
                '}';
    }
}

```

```java
public class Test03 {
    public static void main(String[] args) {
        HashSet<Person> set = new HashSet<>();
        set.add(new Person("æ¶›å“¥",16));
        set.add(new Person("é‡‘è²",24));
        set.add(new Person("æ¶›å“¥",16));
        System.out.println(set);
    }
}
```

```java
æ€»ç»“:
1.å¦‚æœHashSetå­˜å‚¨è‡ªå®šä¹‰ç±»å‹,å¦‚ä½•å»é‡å¤å‘¢?é‡å†™hashCodeå’Œequalsæ–¹æ³•,è®©HashSetæ¯”è¾ƒå±æ€§çš„å“ˆå¸Œå€¼ä»¥åŠå±æ€§çš„å†…å®¹
2.å¦‚æœä¸é‡å†™hashCodeå’Œequalsæ–¹æ³•,é»˜è®¤è°ƒç”¨çš„æ˜¯Objectä¸­çš„,ä¸åŒçš„å¯¹è±¡,è‚¯å®šå“ˆå¸Œå€¼ä¸ä¸€æ ·,equalsæ¯”è¾ƒå¯¹è±¡çš„åœ°å€å€¼ä¹Ÿä¸ä¸€æ ·,æ‰€ä»¥æ­¤æ—¶å³ä½¿å¯¹è±¡çš„å±æ€§å€¼ä¸€æ ·,ä¹Ÿä¸èƒ½å»é‡å¤    
```
